<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KDBX Diff Analyzer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>KDBX Diff Analyzer</h1>

    <nav class="tabs">
        <button class="tab-btn active" data-tab="tab-compare">Compare</button>
        <button class="tab-btn" data-tab="tab-transfer" data-requires-upload disabled>Transfer</button>
        <button class="tab-btn" data-tab="tab-duplicates" data-requires-upload disabled>Duplicates</button>
        <button class="tab-btn" data-tab="tab-import" data-requires-upload disabled>Import</button>
    </nav>

    <div id="status" class="status"></div>

    <!-- Compare Tab -->
    <div id="tab-compare" class="tab-panel active">
        <div class="upload-form">
            <div class="form-row">
                <fieldset>
                    <legend>Database 1</legend>
                    <label>File: <input type="file" id="db1" accept=".kdbx"></label>
                    <label>Password: <input type="password" id="passwordDb1"></label>
                    <label>Key File: <input type="file" id="keyFile1" accept=".key,.keyx,.keyfile,.xml"></label>
                </fieldset>
                <fieldset>
                    <legend>Database 2</legend>
                    <label>File: <input type="file" id="db2" accept=".kdbx"></label>
                    <label>Password: <input type="password" id="passwordDb2"></label>
                    <label>Key File: <input type="file" id="keyFile2" accept=".key,.keyx,.keyfile,.xml"></label>
                </fieldset>
            </div>
            <div class="button-row">
                <button id="uploadBtn">Upload &amp; Load</button>
                <button id="compareBtn" disabled>Compare</button>
            </div>
            <div id="downloadSection" class="button-row" style="display:none">
                <button id="downloadDb1Btn" class="btn-secondary">Download DB1</button>
                <button id="downloadDb2Btn" class="btn-secondary">Download DB2</button>
            </div>
        </div>
        <div id="compareResults"></div>
    </div>

    <!-- Transfer Tab (Phase 5) -->
    <div id="tab-transfer" class="tab-panel">
        <p class="placeholder">Transfer feature coming soon. Upload and compare databases first.</p>
    </div>

    <!-- Duplicates Tab (Phase 6) -->
    <div id="tab-duplicates" class="tab-panel">
        <p class="placeholder">Duplicate finder coming soon. Upload a database first.</p>
    </div>

    <!-- Import Tab (Phase 7) -->
    <div id="tab-import" class="tab-panel">
        <p class="placeholder">Import feature coming soon. Upload databases first.</p>
    </div>

    <!-- Detail Modal -->
    <div id="detailModal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h3>Entry Details</h3>
            <div id="detailBody"></div>
        </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/components/entry-table.js"></script>
    <script src="js/components/compare.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
